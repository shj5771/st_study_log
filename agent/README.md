# AI Agent 개발 기록

##  프로젝트 개요
사내 문서 질의응답을 위한 AI Agent 시스템 구축

## 🛠 기술 스택
- **AI Framework**: LangChain, Custom Agent Architecture
- **백엔드 연동**: Spring Boot REST API
- **보안**: 토큰 기반 인증, 접근 제어
- **아키텍처**: 모듈 단위 세분화 설계

##  개발 진행 기록

### 1단계: AI 모델 설계 및 학습 구조 확립
- [] **사내 문서 분석**: 질의응답 대상 문서 유형 및 구조 파악
- [] **AI 모델 설계**: 사내 문서 특성에 맞는 AI 모델 아키텍처 설계
- [] **초기 학습 구조**: 문서 학습을 위한 기본 파이프라인 구축
- [] **성능 기준 설정**: 질의응답 정확도 및 응답 속도 목표 설정

### 2단계: 모듈 단위 아키텍처 고도화
- [] **Agent 모듈**: 핵심 AI Agent 로직 독립 모듈화
- [] **RAG 모듈**: 문서 검색 및 생성 기능 분리
- [] **확장 기능 모듈**: 향후 추가 기능을 위한 확장 모듈 설계
- [] **모듈 간 인터페이스**: 각 모듈 간 데이터 교환 표준 정의

### 3단계: 백엔드 연동 및 보안 처리
- [] **백엔드 연동**: AI Agent ↔ Spring Boot 백엔드 API 연동
- [] **보안 로직**: AI Agent 호출 시 인증 및 권한 검증 로직 추가
- [] **연동 테스트**: 전체 시스템 통합 테스트 및 정상 동작 확인
- [] **에러 처리**: AI 모델 오류 및 연동 실패 시 예외 처리 구현

### 4단계: 지능형 기능 확장 기반 구축
- [x] **챗봇 로직 분석**: 기존 챗봇 동작 패턴 분석 및 개선점 도출
- [x] **확장 가능성 검토**: 향후 지능형 기능 추가를 위한 기술적 검토
- [x] **기반 코드 정리**: 확장을 위한 코드 구조 최적화 및 문서화

##  Agent 아키텍처 설계

### 모듈 구조(보안상 폴더,파일명, 코드내용 수정)
```
ProjectRoot/                           # 프로젝트 루트 디렉토리
├── __pycache__/                       # Python 캐시 파일
│
├── data_files/                        # 실행 중 다운로드/생성되는 파일 저장소
│
├── modules/                           # 기능 모듈 모음
│   ├── __pycache__/
│   ├── file_utils/                    # 파일 검색/처리 유틸
│   │   ├── __pycache__/
│   │   └── file_search.py             # 파일 검색, fuzzy matching, 경로 찾기 등 핵심 로직
│   └── rules_engine/                  # 규칙 기반 처리 모듈
│       ├── __pycache__/
│       └── rag_rules.py               # RAG(Retrieval-Augmented Generation) 규칙 처리 기능
│
├── docs/                              # 문서/레퍼런스 자료
│   ├── archive/                       # 벡터화끝난 문서 보관
│   │   ├── intern_rules.pdf           # 인턴 규칙 관련 자료
│   │   └── flex_worktime.pdf          # 시차출퇴근제 문서
│   └── reports/                       # 신규 문서(벡터화 전)
│
├── vector_db/                         # 벡터 데이터베이스 및 인덱싱
│   ├── chroma.sqlite3                 # ChromaDB 데이터베이스 (임베딩/검색 인덱스 저장)
│   ├── __init__.py                    # vector_db 패키지 초기화 파일
│   ├── embed_indexer.py               # 문서 임베딩 생성 및 인덱싱 로직
│   └── embeddings/                    # UUID 기반 벡터 데이터 디렉토리
│       └── a6107e7c-914d-4aac-b59...
│
├── .gitignore                         # Git에 포함하지 않을 파일 규칙 정의
├── README.md                          # 프로젝트 소개 및 설명 문서
│
├── embed_indexer.py                   # 독립 실행 가능한 인덱싱 스크립트
├── rag_core.py                        # RAG 관련 기능 (내부 규칙 외부 호출용)
├── agent_core.py                      # 라우팅 에이전트 핵심 모듈 (에이전트 실행 로직)
└── agent_server.py                    # FastAPI 서버 실행 스크립트 (API 엔드포인트, CORS, 라우팅 설정)
```

### Agent 워크플로우
```
사용자 질문 입력
       ↓
   인증 및 권한 확인
       ↓
   문서 검색 (RAG)
       ↓
   AI 추론 및 답변 생성
       ↓
   응답 품질 검증
       ↓
   최종 답변 반환
```

##  보안 구현사항

### AI Agent 보안
- **토큰 기반 인증**: 백엔드와의 모든 통신에 JWT 토큰 활용
- **접근 제어**: 사용자 권한에 따른 문서 접근 범위 제한
- **데이터 보호**: 민감한 사내 문서 처리 시 암호화 적용
- **로그 관리**: AI Agent 사용 이력 및 보안 이벤트 기록

### 입력값 검증
- **질문 필터링**: 부적절한 질문 또는 악의적 입력 차단
- **출력 검증**: AI 생성 답변의 적절성 검토
- **권한 검증**: 각 질문에 대한 사용자 접근 권한 확인

##  성능 및 품질 관리

### 질의응답 품질 지표
- **정확도**: 사내 문서 기반 정답 일치율
- **응답 속도**: 평균 응답 시간 2초 이내 목표
- **사용자 만족도**: 피드백 기반 답변 품질 평가
- **문서 커버리지**: 전체 사내 문서 대비 검색 가능 범위

### 모니터링 시스템
- **실시간 성능**: 응답 시간, 처리량 모니터링
- **오류 추적**: AI 모델 오류 및 연동 실패 추적
- **사용 패턴**: 자주 묻는 질문 및 검색 패턴 분석
- **리소스 사용량**: GPU/CPU 사용률 및 메모리 사용량 모니터링

##  주요 성과

### 기술적 성과
1. **모듈화 설계**: Agent, RAG, 확장 기능을 독립 모듈로 분리하여 유지보수성 향상
2. **백엔드 통합**: Spring Boot와의 완전한 연동으로 통합 시스템 구축
3. **보안 강화**: 다층 보안 구조로 사내 문서 보호 체계 확립
4. **확장 기반**: 향후 지능형 기능 추가를 위한 견고한 아키텍처 구축

### 학습 성과
- **사내 문서 특화**: 일반적인 AI보다 사내 문서에 특화된 질의응답 성능 달성
- **실시간 학습**: 사용자 피드백을 통한 지속적 성능 개선 체계 구축
- **컨텍스트 유지**: 대화 맥락을 고려한 연속적 질의응답 지원

##  챗봇 동작 로직 분석

### 현재 구현된 기능
- **기본 질의응답**: 사내 문서 기반 정보 검색 및 답변
- **대화 기록**: 이전 대화 내용을 고려한 맥락적 응답
- **다중 문서 참조**: 여러 문서에서 정보를 종합하여 답변 생성

### 향후 확장 계획
- **의도 파악**: 사용자 질문의 의도를 더 정확히 파악하는 기능
- **개인화**: 사용자별 선호도 및 업무 특성을 고려한 맞춤형 답변
- **능동적 제안**: 질문하지 않은 관련 정보 능동적 제공
- **다국어 지원**: 영어 문서 및 질의응답 지원

## 📝 다음 개발 계획
- [ ] AI 모델 성능 최적화 (정확도 향상)
- [ ] 실시간 학습 시스템 구축
- [ ] 다국어 지원 기능 추가
- [ ] 고급 분석 기능 (문서 요약, 트렌드 분석)
